{% extends 'base.html' %}
{% block title %}{{ object.name }}{% endblock title %}
{% load static %}
{% block content %}
          <div class="col-12 col-sm-10 col-lg-11" style="max-height: 900px; overflow-y: auto;">
            <!-- add new -->
            <div class="d-sm-flex flex-sm-wrap align-items-center justify-content-between pt-3 pb-3">
              <div class="d-flex align-items-center justify-content-start">
                <h2 class="fs-3">{{ object.name }} {{ object.surname }}</h2>
              </div>
            </div>

            <!-- PROFIELS -->

              <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                  <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">PROFIL</button>
                  <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">ISH HAQI</button>
                </div>
              </nav>
              <div class="tab-content" id="nav-tabContent">

                <div class="tab-pane fade show active p-3" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">

                  <div class="row">
                    
                  <div class="h-50 col-12 my-2 col-lg-6 col-xl-4 px-4 py-3 bg-white shadow rounded">
                    <div class="d-flex">
                      <div class="w-100 h-25 d-flex justify-content-center">
                        <div class=" d-flex align-items-center flex-column">
                          {% if object.profile_pic %}
                          <img class="w-25 rounded-pill" src="{% static 'img/logo.png' %}" alt="">
                          {% else %}
                          <img class="w-25 rounded-pill" src="{% static 'img/logo.png' %}" alt="">
                          {% endif %}
                          <span class="">{{ object.name }} {{ object.surname }}</span>
                        </div>
                      </div>
                      <div class="">
                        <a class="p-1 my-2 rounded-pill border border-success d-flex align-items-center justify-content-center" data-bs-toggle="offcanvas" data-bs-target="#addTeacherSmsModal" aria-controls="offcanvasRight" data-bs-toggle="tooltip" data-bs-placement="top" title="Eslatma" href="#">
                          <i class="bx bx-flag text-success"></i>
                        </a>
                        <a class="p-1 rounded-pill border border-danger d-flex align-items-center justify-content-center" data-bs-toggle="offcanvas" data-bs-target="#addEditTeacherModal" aria-controls="offcanvasRight" aria-controls="offcanvasRight" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit" href="#">
                          <i class="bx bx-pencil text-danger"></i>
                        </a>
                      </div>
                    </div>
                    <div class="py-2">
                      <div class="w-100 text-secondary d-flex">Telefon: <p class="mx-2 m-0 text-black">{{ object.phone_number }}</p></div>
                      <div class="my-2 w-50 text-secondary d-flex flex-column">Rollar: <button class="w-50 bg-body my-1 border border-danger rounded-pill text-danger">Teacher</button></div>
                    </div>
                  </div>
                  
                  <div class="col-12 my-2 col-lg-6 col-xl-4 rounded">
                    <h5 class="w-100">Guruhlar</h5>
                   {% for i in object.group.all %}
                   <div class="w-100 p-3 shadow bg-secondary bg-opacity-25 d-flex align-items-center justify-content-between my-3">
                    <div class="d-flex flex-column">
                      <span class="text-center bg-body"></span>
                      <p class="m-0 my-1">{{ i.name }}</p>
                    </div>
                    <div class="d-flex flex-column">
                      <p class="m-0 text-secondary">{{ i.started_date }}</p>
                      <p class="m-0 text-secondary">{{ i.ends_in }}</p>
                      <p class="m-0 text-secondary">{{ i.days }} • {{ i.time }}</p>
                    </div>
                    <span class="px-2 text-white rounded bg-success">{{ i.students.count }}</span>
                  </div>
                   {% endfor %}

                  </div>
                  
                   {% for i in object.group.all %}
                   <div class="col-12 my-2 col-lg-6 col-xl-4 shadow rounded">
                    <div class="px-3 py-4 border-bottom w-100 d-flex flex-column align-items-end">
                      <span class="px-3 text-center bg-secondary bg-opacity-25">{{ i.name }}</span>
                      <p class="m-0 my-1">{{ i }}</p>
                      <span class="text-secondary d-flex">Xona: <p class="m-0 mx-1 text-black">{{ i.room }}</p></span>
                      <span class="text-secondary d-flex">Boshlash: <p class="m-0 mx-1 text-black">{{ i.time }}</p></span>
                    </div>
                    <div class="w-100 p-3">
                      {% for j in i.students.all %}
                      <div class="my-2 d-flex align-items-center justify-content-between">
                        <p class="m-0">{{ j.get_fullname }}</p>
                        <p class="m-0">{{ j.phone_number }}</p>
                      </div>
                      {% endfor %}
                      <div class="my-3 d-flex align-items-center justify-content-end">
                        <a href="{% url 'groups:group_detail' i.id %}">Guruhga o'tish <i class="bx bx-right-arrow-alt"></i></a>
                      </div>
                    </div>
                  </div>
                   {% endfor%}
                  </div>
                </div>

                <div class="tab-pane fade " id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                  <div class="col-12 col-lg-6 my-4 p-4 d-flex align-items-start justify-content-between shadow">
                    <div class="">
                      <h5>Talabalar tashrifi olib tashlandi</h5>
                      <div class="my-2">
                        <i class="bx bx-user"></i>
                        Shohruhbek 2 • (99) 333 33 33 
                      </div>
                    </div>
                    <div class="d-flex flex-column">
                      <span>03.03.2023 09:23:32</span>
                      <span>Shohruhbek 2</span>
                    </div>
                  </div>

                  <div class="col-12 col-lg-6 my-4 p-4 d-flex align-items-start justify-content-between shadow">
                    <div class="">
                      <h5>Talabalar tashrifi olib tashlandi</h5>
                      <div class="my-2">
                        <i class="bx bx-user"></i>
                        Shohruhbek 2 • (99) 333 33 33 
                      </div>
                    </div>
                    <div class="d-flex flex-column">
                      <span>03.03.2023 09:23:32</span>
                      <span>Shohruhbek 2</span>
                    </div>
                  </div>

                  <div class="col-12 col-lg-6 my-4 p-4 d-flex align-items-start justify-content-between shadow">
                    <div class="">
                      <h5>Talabalar tashrifi olib tashlandi</h5>
                      <div class="my-2">
                        <i class="bx bx-user"></i>
                        Shohruhbek 2 • (99) 333 33 33 
                      </div>
                    </div>
                    <div class="d-flex flex-column">
                      <span>03.03.2023 09:23:32</span>
                      <span>Shohruhbek 2</span>
                    </div>
                  </div>

                </div>

                <div class="tab-pane fade " id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                  <div class="table-responsive table-scroll" style="max-height: 80vh;">
                    <table class="table table-striped caption-top overflow-y-scroll">
                      <thead class="">
                        <tr class="">
                          <th class="px-3 py-3" scope="col">Guruh</th>
                          <th class="px-3 py-3" scope="col">Talaba</th>
                          <th class="px-3 py-3" scope="col">So'm</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for i in object.group.all %}
                          {% for j in i.students.all %}
                          <tr>
                            <td class="px-3 py-3">{{ i }}</td>
                            <td class="px-3 py-3">{{ j.get_fullname }}</td>
                            <td class="px-3 py-3">{{ i.price }}</td>
                          </tr>
                          {% endfor %}
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>

                </div>
              </div>
            
          </div>


          <div class="offcanvas offcanvas-end" tabindex="-1" id="addTeacherSmsModal" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header">
              <h5 class="modal-title m-0" id="staticBackdropLabel">O'qituvchiga SMS yuboring</h5>
              <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <form class="d-flex align-items-center flex-wrap"  method="POST">
                {% csrf_token %}
                {{ send_sms }}
                <button class="btn btn-success rounded-pill" name="send_sms">SMS yuborish</button>
              </form>
              
            </div>
          </div>
          <!-- Modal TAHRIRLASH -->
          <div class="offcanvas offcanvas-end" tabindex="-1" id="addEditTeacherModal" aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header">
      <h5 class="modal-title m-0" id="staticBackdropLabel">O'qituvchini taxrirlash</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <form class="d-flex align-items-center flex-wrap" method="POST">
        {% csrf_token %}
        {{ update_form }}
        <button class="btn btn-success rounded-pill" name="edit">Yuborish</button>
      </form>
      
    </div>
          </div>
{% endblock content %}
